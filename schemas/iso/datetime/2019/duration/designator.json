{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ISO 8601-1:2019 Duration (Designator Format)",
  "description": "A duration in designator format P[n]Y[n]M[n]DT[n]H[n]M[n]S (ยง5.5.2.2, ยง5.5.2.3)",
  "examples": [
    "P3Y6M4DT12H30M5S",
    "P1Y",
    "PT1H",
    "P1DT1S",
    "P0Y0M0DT0H0M0S",
    "P1.5Y",
    "PT0.5H"
  ],
  "x-license": "https://github.com/sourcemeta/std/blob/main/LICENSE",
  "x-links": [ "https://www.iso.org/standard/70907.html" ],
  "type": "string",
  "allOf": [
    {
      "not": {
        "const": "P"
      }
    },
    {
      "not": {
        "const": "PT"
      }
    }
  ],
  "anyOf": [
    {
      "$comment": "Date-only: Years with decimal (lowest order)",
      "pattern": "^P[0-9]+(?:\\.[0-9]+)?Y$"
    },
    {
      "$comment": "Date-only: Years (integer) + Months with decimal (lowest order)",
      "pattern": "^P[0-9]+Y[0-9]+(?:\\.[0-9]+)?M$"
    },
    {
      "$comment": "Date-only: Years (integer) + Months (integer) + Days with decimal (lowest order)",
      "pattern": "^P[0-9]+Y[0-9]+M[0-9]+(?:\\.[0-9]+)?D$"
    },
    {
      "$comment": "Date-only: Months with decimal (lowest order)",
      "pattern": "^P[0-9]+(?:\\.[0-9]+)?M$"
    },
    {
      "$comment": "Date-only: Months (integer) + Days with decimal (lowest order)",
      "pattern": "^P[0-9]+M[0-9]+(?:\\.[0-9]+)?D$"
    },
    {
      "$comment": "Date-only: Days with decimal (lowest order)",
      "pattern": "^P[0-9]+(?:\\.[0-9]+)?D$"
    },
    {
      "$comment": "Time-only: Hours with decimal (lowest order)",
      "pattern": "^PT[0-9]+(?:\\.[0-9]+)?H$"
    },
    {
      "$comment": "Time-only: Hours (integer) + Minutes with decimal (lowest order)",
      "pattern": "^PT[0-9]+H[0-9]+(?:\\.[0-9]+)?M$"
    },
    {
      "$comment": "Time-only: Hours (integer) + Minutes (integer) + Seconds with decimal (lowest order)",
      "pattern": "^PT[0-9]+H[0-9]+M[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Time-only: Minutes with decimal (lowest order)",
      "pattern": "^PT[0-9]+(?:\\.[0-9]+)?M$"
    },
    {
      "$comment": "Time-only: Minutes (integer) + Seconds with decimal (lowest order)",
      "pattern": "^PT[0-9]+M[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Time-only: Seconds with decimal (lowest order)",
      "pattern": "^PT[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Date+Time: Years + Hours with decimal (lowest order)",
      "pattern": "^P[0-9]+YT[0-9]+(?:\\.[0-9]+)?H$"
    },
    {
      "$comment": "Date+Time: Years + Hours (integer) + Minutes with decimal (lowest order)",
      "pattern": "^P[0-9]+YT[0-9]+H[0-9]+(?:\\.[0-9]+)?M$"
    },
    {
      "$comment": "Date+Time: Years + Hours (integer) + Minutes (integer) + Seconds with decimal (lowest order)",
      "pattern": "^P[0-9]+YT[0-9]+H[0-9]+M[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Date+Time: Years + Minutes with decimal (lowest order)",
      "pattern": "^P[0-9]+YT[0-9]+(?:\\.[0-9]+)?M$"
    },
    {
      "$comment": "Date+Time: Years + Minutes (integer) + Seconds with decimal (lowest order)",
      "pattern": "^P[0-9]+YT[0-9]+M[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Date+Time: Years + Seconds with decimal (lowest order)",
      "pattern": "^P[0-9]+YT[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Date+Time: Years (integer) + Months + Hours with decimal (lowest order)",
      "pattern": "^P[0-9]+Y[0-9]+MT[0-9]+(?:\\.[0-9]+)?H$"
    },
    {
      "$comment": "Date+Time: Years (integer) + Months + Hours (integer) + Minutes with decimal (lowest order)",
      "pattern": "^P[0-9]+Y[0-9]+MT[0-9]+H[0-9]+(?:\\.[0-9]+)?M$"
    },
    {
      "$comment": "Date+Time: Years (integer) + Months + Hours (integer) + Minutes (integer) + Seconds with decimal (lowest order)",
      "pattern": "^P[0-9]+Y[0-9]+MT[0-9]+H[0-9]+M[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Date+Time: Years (integer) + Months + Minutes with decimal (lowest order)",
      "pattern": "^P[0-9]+Y[0-9]+MT[0-9]+(?:\\.[0-9]+)?M$"
    },
    {
      "$comment": "Date+Time: Years (integer) + Months + Minutes (integer) + Seconds with decimal (lowest order)",
      "pattern": "^P[0-9]+Y[0-9]+MT[0-9]+M[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Date+Time: Years (integer) + Months + Seconds with decimal (lowest order)",
      "pattern": "^P[0-9]+Y[0-9]+MT[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Date+Time: Years (integer) + Months (integer) + Days + Hours with decimal (lowest order)",
      "pattern": "^P[0-9]+Y[0-9]+M[0-9]+DT[0-9]+(?:\\.[0-9]+)?H$"
    },
    {
      "$comment": "Date+Time: Years (integer) + Months (integer) + Days + Hours (integer) + Minutes with decimal (lowest order)",
      "pattern": "^P[0-9]+Y[0-9]+M[0-9]+DT[0-9]+H[0-9]+(?:\\.[0-9]+)?M$"
    },
    {
      "$comment": "Date+Time: Years (integer) + Months (integer) + Days + Hours (integer) + Minutes (integer) + Seconds with decimal (lowest order)",
      "pattern": "^P[0-9]+Y[0-9]+M[0-9]+DT[0-9]+H[0-9]+M[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Date+Time: Years (integer) + Months (integer) + Days + Minutes with decimal (lowest order)",
      "pattern": "^P[0-9]+Y[0-9]+M[0-9]+DT[0-9]+(?:\\.[0-9]+)?M$"
    },
    {
      "$comment": "Date+Time: Years (integer) + Months (integer) + Days + Minutes (integer) + Seconds with decimal (lowest order)",
      "pattern": "^P[0-9]+Y[0-9]+M[0-9]+DT[0-9]+M[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Date+Time: Years (integer) + Months (integer) + Days + Seconds with decimal (lowest order)",
      "pattern": "^P[0-9]+Y[0-9]+M[0-9]+DT[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Date+Time: Months + Hours with decimal (lowest order)",
      "pattern": "^P[0-9]+MT[0-9]+(?:\\.[0-9]+)?H$"
    },
    {
      "$comment": "Date+Time: Months + Hours (integer) + Minutes with decimal (lowest order)",
      "pattern": "^P[0-9]+MT[0-9]+H[0-9]+(?:\\.[0-9]+)?M$"
    },
    {
      "$comment": "Date+Time: Months + Hours (integer) + Minutes (integer) + Seconds with decimal (lowest order)",
      "pattern": "^P[0-9]+MT[0-9]+H[0-9]+M[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Date+Time: Months + Minutes with decimal (lowest order)",
      "pattern": "^P[0-9]+MT[0-9]+(?:\\.[0-9]+)?M$"
    },
    {
      "$comment": "Date+Time: Months + Minutes (integer) + Seconds with decimal (lowest order)",
      "pattern": "^P[0-9]+MT[0-9]+M[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Date+Time: Months + Seconds with decimal (lowest order)",
      "pattern": "^P[0-9]+MT[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Date+Time: Months (integer) + Days + Hours with decimal (lowest order)",
      "pattern": "^P[0-9]+M[0-9]+DT[0-9]+(?:\\.[0-9]+)?H$"
    },
    {
      "$comment": "Date+Time: Months (integer) + Days + Hours (integer) + Minutes with decimal (lowest order)",
      "pattern": "^P[0-9]+M[0-9]+DT[0-9]+H[0-9]+(?:\\.[0-9]+)?M$"
    },
    {
      "$comment": "Date+Time: Months (integer) + Days + Hours (integer) + Minutes (integer) + Seconds with decimal (lowest order)",
      "pattern": "^P[0-9]+M[0-9]+DT[0-9]+H[0-9]+M[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Date+Time: Months (integer) + Days + Minutes with decimal (lowest order)",
      "pattern": "^P[0-9]+M[0-9]+DT[0-9]+(?:\\.[0-9]+)?M$"
    },
    {
      "$comment": "Date+Time: Months (integer) + Days + Minutes (integer) + Seconds with decimal (lowest order)",
      "pattern": "^P[0-9]+M[0-9]+DT[0-9]+M[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Date+Time: Months (integer) + Days + Seconds with decimal (lowest order)",
      "pattern": "^P[0-9]+M[0-9]+DT[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Date+Time: Days + Hours with decimal (lowest order)",
      "pattern": "^P[0-9]+DT[0-9]+(?:\\.[0-9]+)?H$"
    },
    {
      "$comment": "Date+Time: Days + Hours (integer) + Minutes with decimal (lowest order)",
      "pattern": "^P[0-9]+DT[0-9]+H[0-9]+(?:\\.[0-9]+)?M$"
    },
    {
      "$comment": "Date+Time: Days + Hours (integer) + Minutes (integer) + Seconds with decimal (lowest order)",
      "pattern": "^P[0-9]+DT[0-9]+H[0-9]+M[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Date+Time: Days + Minutes with decimal (lowest order)",
      "pattern": "^P[0-9]+DT[0-9]+(?:\\.[0-9]+)?M$"
    },
    {
      "$comment": "Date+Time: Days + Minutes (integer) + Seconds with decimal (lowest order)",
      "pattern": "^P[0-9]+DT[0-9]+M[0-9]+(?:\\.[0-9]+)?S$"
    },
    {
      "$comment": "Date+Time: Days + Seconds with decimal (lowest order)",
      "pattern": "^P[0-9]+DT[0-9]+(?:\\.[0-9]+)?S$"
    }
  ]
}
